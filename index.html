<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Boosters - Fun Learning Games!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Bubblegum+Sans&display=swap');

        :root {
            --primary: #FF9ED8;
            --secondary: #9EECFF;
            --accent: #FFD56B;
            --correct: #A8E890;
            --wrong: #FF9494;
            --text: #5B4B8A;
            --light-bg: #F9F9FF;
        }

        * {
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        body {
            font-family: 'Comic Neue', cursive;
            background-color: var(--light-bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 20px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            border-radius: 0 0 30px 30px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        h1, h2, h3 {
            font-family: 'Bubblegum Sans', cursive;
            margin: 0;
            letter-spacing: 1px;
        }

        h1 {
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Game Selection Screen */
        .game-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .game-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 3px solid transparent;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
            border-color: var(--accent);
        }

        .game-card img {
            width: 80px;
            height: 80px;
            margin-bottom: 10px;
        }

        .game-card h3 {
            margin: 10px 0;
            color: var(--text);
        }

        /* Game Area */
        .game-area {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s;
        }

        .level-selection {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .level-btn {
            background-color: white;
            border: 2px solid var(--accent);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        .level-btn.active {
            background-color: var(--accent);
            color: white;
        }

        .game-content {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Odd One Out Game */
        .odd-one-out-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .odd-item {
            border: 3px solid transparent;
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
            background-color: white;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .odd-item:hover {
            transform: scale(1.05);
        }

        .odd-item img {
            max-width: 100%;
            height: auto;
        }

        .odd-item.selected {
            border-color: var(--accent);
        }

        .odd-item.correct {
            background-color: var(--correct);
            border-color: var(--correct);
        }

        .odd-item.wrong {
            background-color: var(--wrong);
            border-color: var(--wrong);
        }

        /* Match Columns Game */
        .match-columns {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 40px;
            margin: 20px 0;
        }

        .match-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .match-item {
            width: 100px;
            height: 100px;
            border: 3px solid #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background-color: white;
            position: relative;
        }

        .match-item img {
            max-width: 80%;
            max-height: 80%;
        }

        .match-item.selected {
            border-color: var(--accent);
        }

        .match-item.matched {
            border-color: var(--correct);
            background-color: var(--correct);
            opacity: 0.8;
            cursor: default;
        }

        .match-line {
            position: absolute;
            height: 3px;
            background-color: var(--accent);
            transform-origin: left center;
            z-index: 1;
        }

        /* Count Items Game */
        .count-items-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .count-items-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .count-item {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .count-item img {
            max-width: 100%;
            max-height: 100%;
        }

        .count-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .count-input input {
            width: 80px;
            height: 50px;
            font-size: 1.5rem;
            text-align: center;
            border: 2px solid var(--secondary);
            border-radius: 10px;
            padding: 5px;
        }

        .count-input input:focus {
            border-color: var(--accent);
            outline: none;
        }

        /* Find Missing Game */
        .missing-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .pattern-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .pattern-item {
            width: 70px;
            height: 70px;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
        }

        .pattern-item img {
            max-width: 80%;
            max-height: 80%;
        }

        .pattern-item.missing {
            border: 2px dashed var(--accent);
            background-color: rgba(255, 213, 107, 0.1);
        }

        .options-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .option-item {
            width: 60px;
            height: 60px;
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background-color: white;
        }

        .option-item:hover {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .option-item img {
            max-width: 80%;
            max-height: 80%;
        }

        .option-item.selected {
            border-color: var(--accent);
            background-color: rgba(255, 213, 107, 0.2);
        }

        .option-item.correct {
            border-color: var(--correct);
            background-color: var(--correct);
        }

        .option-item.wrong {
            border-color: var(--wrong);
            background-color: var(--wrong);
        }

        /* Memory Game */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            margin: 20px 0;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .memory-card {
            height: 80px;
            border-radius: 10px;
            background-color: var(--secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }

        .memory-card.flipped {
            transform: rotateY(180deg);
        }

        .memory-card-front, .memory-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }

        .memory-card-front {
            background-color: var(--secondary);
            transform: rotateY(180deg);
        }

        .memory-card-back {
            background-color: var(--primary);
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        .memory-card.matched {
            background-color: var(--correct);
            cursor: default;
        }

        .memory-card img {
            max-width: 80%;
            max-height: 80%;
        }

        /* Navigation */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 10px 20px;
            font-family: 'Bubblegum Sans', cursive;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(1px);
        }

        button.secondary {
            background-color: var(--secondary);
        }

        /* Score System */
        .score-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            margin: 15px 0;
        }

        .star {
            font-size: 30px;
            color: #ddd;
        }

        .star.filled {
            color: var(--accent);
        }

        /* Feedback Message */
        .feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background-color: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 100;
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
        }

        .feedback.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .feedback h2 {
            margin-top: 0;
        }

        .emoji {
            font-size: 60px;
            margin: 10px 0;
        }

        /* Animations */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .bounce {
            animation: bounce 0.5s;
        }

        /* Audio Controls */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
        }

        .audio-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }

        .audio-btn:hover {
            transform: scale(1.1);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .game-card {
                padding: 15px;
            }
            
            .match-columns {
                gap: 20px;
            }
            
            .match-item {
                width: 80px;
                height: 80px;
            }
            
            .odd-one-out-items {
                grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .game-card img {
                width: 60px;
                height: 60px;
            }
            
            .match-item {
                width: 70px;
                height: 70px;
            }
            
            .navigation {
                justify-content: center;
            }
            
            .audio-controls {
                bottom: 10px;
                right: 10px;
            }
            
            .audio-btn {
                width: 30px;
                height: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Brain Boosters</h1>
            <p>Fun Learning Games For Smart Kids!</p>
        </header>

        <!-- Game Selection Screen -->
        <div id="gameSelection" class="game-selection">
            <div class="game-card" onclick="selectGame('oddOneOut')">
                <img src="https://media.baamboozle.com/uploads/images/426622/1636008015_74953_gif-url.gif" alt="Odd One Out">
                <h3>Find the Odd One</h3>
                <p>Can you spot what doesn't belong?</p>
            </div>
            <div class="game-card" onclick="selectGame('matchColumns')">
                <img src="https://media3.giphy.com/media/nodVXb4dYC0cETfa62/giphy.gif?cid=6c09b9522p8ixgzh8hffu5xcq1zstvqhzfe6m3b3c732klkh&ep=v1_stickers_search&rid=giphy.gif&ct=s" alt="Match Columns">
                <h3>Match Columns</h3>
                <p>Connect things that go together!</p>
            </div>
            <div class="game-card" onclick="selectGame('countItems')">
                <img src="https://media.tenor.com/eHSxO0p2DEkAAAAj/bolite-conrad-digital.gif" alt="Count Items">
                <h3>Count the Items</h3>
                <p>How many can you count?</p>
            </div>
            <div class="game-card" onclick="selectGame('findMissing')">
                <img src="https://zoogif.com/wp-content/uploads/2020/10/Monkey-Waving-Hand-500.gif" alt="Find Missing">
                <h3>Find the Missing One</h3>
                <p>What should come next?</p>
            </div>
            <div class="game-card" onclick="selectGame('memoryGame')">
                <img src="https://i.pinimg.com/originals/3d/1e/f7/3d1ef7c6d6532af2e3e09f47ae4cf930.gif" alt="Memory Game">
                <h3>Memory Match</h3>
                <p>Remember and match the pairs!</p>
            </div>
        </div>

        <!-- Odd One Out Game -->
        <div id="oddOneOut" class="game-area">
            <h2>Find the Odd One Out</h2>
            <div class="level-selection">
                <div class="level-btn active" onclick="loadOddOneOutLevel(1)">1</div>
                <div class="level-btn" onclick="loadOddOneOutLevel(2)">2</div>
                <div class="level-btn" onclick="loadOddOneOutLevel(3)">3</div>
            </div>
            <div class="score-display">
                <div class="star">★</div>
                <div class="star">★</div>
                <div class="star">★</div>
            </div>
            <div class="game-content">
                <p class="instructions">Look at the pictures and tap the one that's different from the others!</p>
                <div id="oddOneOutItems" class="odd-one-out-items">
                    <!-- Items will be dynamically loaded here -->
                </div>
            </div>
            <div class="navigation">
                <button onclick="goToHome()">Home</button>
                <button id="oddOneOutPrev" onclick="prevOddOneOutLevel()" disabled>Previous</button>
                <button id="oddOneOutNext" onclick="nextOddOneOutLevel()">Next</button>
            </div>
        </div>

        <!-- Match Columns Game -->
        <div id="matchColumns" class="game-area">
            <h2>Match the Columns</h2>
            <div class="level-selection">
                <div class="level-btn active" onclick="loadMatchColumnsLevel(1)">1</div>
                <div class="level-btn" onclick="loadMatchColumnsLevel(2)">2</div>
                <div class="level-btn" onclick="loadMatchColumnsLevel(3)">3</div>
            </div>
            <div class="score-display">
                <div class="star">★</div>
                <div class="star">★</div>
                <div class="star">★</div>
            </div>
            <div class="game-content">
                <p class="instructions">Connect the items that belong together!</p>
                <div id="matchColumnsContainer" class="match-columns">
                    <!-- Columns will be dynamically loaded here -->
                </div>
            </div>
            <div class="navigation">
                <button onclick="goToHome()">Home</button>
                <button id="matchColumnsPrev" onclick="prevMatchColumnsLevel()" disabled>Previous</button>
                <button id="matchColumnsNext" onclick="nextMatchColumnsLevel()">Next</button>
            </div>
        </div>

        <!-- Count Items Game -->
        <div id="countItems" class="game-area">
            <h2>Count the Items</h2>
            <div class="level-selection">
                <div class="level-btn active" onclick="loadCountItemsLevel(1)">1</div>
                <div class="level-btn" onclick="loadCountItemsLevel(2)">2</div>
                <div class="level-btn" onclick="loadCountItemsLevel(3)">3</div>
            </div>
            <div class="score-display">
                <div class="star">★</div>
                <div class="star">★</div>
                <div class="star">★</div>
            </div>
            <div class="game-content">
                <p class="instructions">Count how many items there are and enter your answer!</p>
                <div id="countItemsDisplay" class="count-items-display">
                    <!-- Items will be dynamically loaded here -->
                </div>
                <div class="count-input">
                    <label for="countAnswer">How many?</label>
                    <input type="number" id="countAnswer" min="0" max="20">
                    <button onclick="checkCountAnswer()">Check</button>
                </div>
            </div>
            <div class="navigation">
                <button onclick="goToHome()">Home</button>
                <button id="countItemsPrev" onclick="prevCountItemsLevel()" disabled>Previous</button>
                <button id="countItemsNext" onclick="nextCountItemsLevel()">Next</button>
            </div>
        </div>

        <!-- Find Missing Game -->
        <div id="findMissing" class="game-area">
            <h2>Find the Missing One</h2>
            <div class="level-selection">
                <div class="level-btn active" onclick="loadFindMissingLevel(1)">1</div>
                <div class="level-btn" onclick="loadFindMissingLevel(2)">2</div>
                <div class="level-btn" onclick="loadFindMissingLevel(3)">3</div>
            </div>
            <div class="score-display">
                <div class="star">★</div>
                <div class="star">★</div>
                <div class="star">★</div>
            </div>
            <div class="game-content">
                <p class="instructions">Look at the pattern and choose what should go in the empty space!</p>
                <div id="patternDisplay" class="pattern-display">
                    <!-- Pattern will be dynamically loaded here -->
                </div>
                <div id="optionsDisplay" class="options-display">
                    <!-- Options will be dynamically loaded here -->
                </div>
            </div>
            <div class="navigation">
                <button onclick="goToHome()">Home</button>
                <button id="findMissingPrev" onclick="prevFindMissingLevel()" disabled>Previous</button>
                <button id="findMissingNext" onclick="nextFindMissingLevel()">Next</button>
            </div>
        </div>

        <!-- Memory Game -->
        <div id="memoryGame" class="game-area">
            <h2>Memory Match</h2>
            <div class="level-selection">
                <div class="level-btn active" onclick="loadMemoryLevel(1)">1</div>
                <div class="level-btn" onclick="loadMemoryLevel(2)">2</div>
                <div class="level-btn" onclick="loadMemoryLevel(3)">3</div>
            </div>
            <div class="score-display">
                <div class="star">★</div>
                <div class="star">★</div>
                <div class="star">★</div>
            </div>
            <div class="game-content">
                <p class="instructions">Find matching pairs by flipping the cards. Remember where they are!</p>
                <div id="memoryGrid" class="memory-grid">
                    <!-- Memory cards will be dynamically loaded here -->
                </div>
            </div>
            <div class="navigation">
                <button onclick="goToHome()">Home</button>
                <button id="memoryGamePrev" onclick="prevMemoryLevel()" disabled>Previous</button>
                <button id="memoryGameNext" onclick="nextMemoryLevel()">Next</button>
            </div>
        </div>

        <!-- Feedback Message -->
        <div id="feedback" class="feedback">
            <h2 id="feedbackTitle">Great job!</h2>
            <div id="feedbackEmoji" class="emoji">🎉</div>
            <p id="feedbackMessage">You found the correct answer!</p>
        </div>

        <!-- Audio Controls -->
        <div class="audio-controls">
            <div class="audio-btn" id="toggleMusic" onclick="toggleMusic()">🎵</div>
            <div class="audio-btn" id="toggleSound" onclick="toggleSound()">🔊</div>
        </div>
    </div>

    <script>
        // Game State Variables
        let currentGame = '';
        let currentLevel = 1;
        let scores = {
            oddOneOut: [0, 0, 0],
            matchColumns: [0, 0, 0],
            countItems: [0, 0, 0],
            findMissing: [0, 0, 0],
            memoryGame: [0, 0, 0]
        };
        
        // Game data
        const gameData = {
            oddOneOut: {
                levels: [
                    {
                        items: [
                            { img: '🍎', isOdd: false },
                            { img: '🍎', isOdd: false },
                            { img: '🍎', isOdd: false },
                            { img: '🍌', isOdd: true },
                            { img: '🍎', isOdd: false },
                            { img: '🍎', isOdd: false }
                        ],
                        difficulty: 'Easy'
                    },
                    {
                        items: [
                            { img: '🐱', isOdd: false },
                            { img: '🐱', isOdd: false },
                            { img: '🐶', isOdd: true },
                            { img: '🐱', isOdd: false },
                            { img: '🐱', isOdd: false },
                            { img: '🐱', isOdd: false },
                            { img: '🐱', isOdd: false },
                            { img: '🐱', isOdd: false }
                        ],
                        difficulty: 'Medium'
                    },
                    {
                        items: [
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '💫', isOdd: true },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false },
                            { img: '🌟', isOdd: false }
                        ],
                        difficulty: 'Hard'
                    }
                ]
            },
            matchColumns: {
                levels: [
                    {
                        pairs: [
                            { left: '🐶', right: '🦴' },
                            { left: '🐱', right: '🐟' },
                            { left: '🐰', right: '🥕' }
                        ],
                        difficulty: 'Easy'
                    },
                    {
                        pairs: [
                            { left: '☀️', right: '🕶️' },
                            { left: '☔', right: '🌧️' },
                            { left: '❄️', right: '🧣' },
                            { left: '📚', right: '✏️' }
                        ],
                        difficulty: 'Medium'
                    },
                    {
                        pairs: [
                            { left: '🇺🇸', right: '🗽' },
                            { left: '🇬🇧', right: '🏰' },
                            { left: '🇫🇷', right: '🗼' },
                            { left: '🇮🇹', right: '🍕' },
                            { left: '🇯🇵', right: '🌸' }
                        ],
                        difficulty: 'Hard'
                    }
                ]
            },
            countItems: {
                levels: [
                    {
                        items: [
                            { img: '🍎', count: 3 },
                            { img: '🍌', count: 2 },
                            { img: '🍓', count: 5 }
                        ],
                        difficulty: 'Easy'
                    },
                    {
                        items: [
                            { img: '🐶', count: 4 },
                            { img: '🐱', count: 3 },
                            { img: '🐰', count: 2 },
                            { img: '🐢', count: 5 }
                        ],
                        difficulty: 'Medium'
                    },
                    {
                        items: [
                            { img: '🚗', count: 6 },
                            { img: '🚌', count: 3 },
                            { img: '🚲', count: 4 },
                            { img: '✈️', count: 2 },
                            { img: '🚢', count: 1 }
                        ],
                        difficulty: 'Hard'
                    }
                ]
            },
            findMissing: {
                levels: [
                    {
                        pattern: ['🔴', '🔵', '🟢', '🔴', '🔵', '❓'],
                        options: ['🟢', '🟣', '🟡', '⚫'],
                        correctAnswer: 0,
                        difficulty: 'Easy'
                    },
                    {
                        pattern: ['🐶', '🐱', '🐰', '🐶', '🐱', '❓'],
                        options: ['🐢', '🐰', '🐱', '🐶'],
                        correctAnswer: 1,
                        difficulty: 'Medium'
                    },
                    {
                        pattern: ['1️⃣', '3️⃣', '5️⃣', '7️⃣', '❓'],
                        options: ['8️⃣', '9️⃣', '6️⃣', '4️⃣'],
                        correctAnswer: 0,
                        difficulty: 'Hard'
                    }
                ]
            },
            memoryGame: {
                levels: [
                    {
                        pairs: ['🍎', '🍌', '🍓', '🍊'],
                        gridSize: 4,
                        difficulty: 'Easy'
                    },
                    {
                        pairs: ['🐶', '🐱', '🐰', '🐢', '🐘', '🦒'],
                        gridSize: 6,
                        difficulty: 'Medium'
                    },
                    {
                        pairs: ['🚗', '🚌', '🚲', '✈️', '🚢', '🚁', '🚂', '🏍️'],
                        gridSize: 8,
                        difficulty: 'Hard'
                    }
                ]
            }
        };
        
        // Audio Elements
        const bgMusic = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAAAwAAAbAAyMjIyMjIyMjIyMjIyMjIyMjIyMjI+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj/////////////////////////////////AAAAAExhdmM1OC4xMwAAAAAAAAAAAAAAACQEKAAAAAAAALAEjDILAAAAAAAAAAAAAAAAAAAAAP/jOMQAB+gDA0gAAGCc1fS5JCIAIP7F/N2EP8tD/KQJvQ/yHP8hTnP+Q//Ir+Q5znOc5znP//j/kD/kOc//yDnOf5AGP//jTMQABvAMA0gAAGAAAWf2zHAIALtCmzR+5c+e5P+SgEgNdU1EkL95znOQ5BADEOR4GAOIctznH//4DHBA3/Ic5AjDsOdcDf/4fISOQEcQAcAg5znIYQQEdh/rnP///Ic5AjAGH5CDAIH/kEOQ5z//kMOQIw4BABhyGP/4/5DHIc5z//Ic5z+QowgByBAAAAIAAoAAAAAACg');
        const correctSound = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABAAABCgAwsLC19fX19fX19fX7Ozs+Pj4+Pj4+Pj4ExMTJSUlJSUlJSUlOjo6TExMTExMTExMAAAAAAAAAAAAAAAAAAAAAP/jSMQAD+gDJKUAAGCBlVsqxRsaGCdm/JAgkLqJMHV2jP+Z5liMqAwkFUdHy75/+ZnP8vkEQYx6fn/y+YIRNtfKCII+XyQQgID5fJ8ggiBcIwhiiFv5QCFEAsQDI7kQAAx3///jUMQZBZQCNZ4AAJ8+sErBIClZWXydHBwE1mbELe2FnXOT9q7dxXNnYP9g/8Hcgfc9BXU9ub3f9jeQf/e7/Z/h93+znOc5znOc5znOCAgICAgICAgY/+NQxBkE7AIVngAAnKAgICAgYCAgLOztgqAwXEAQDA0JlEIIDQQaGhoaHRoaGg0Gg0Gj//o0NDozho0GjaGhoND//qHRtGxo0aGhooND//8EPAQCBsaGn/+PpCBAD/+mhoeP/w');
        const wrongSound = new Audio('data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAACAAABPAAGhoaJCQkLi4uODg4QkJCTExMVlZWYGBgampqdHR0fX19h4eHkZGRm5ubo6Ojra2tt7e3wcHBy8vL1dXV39/f6enp8vLy/Pz8AAAAAExhdmM1OC4xMwAAAAAAAAAAAAAAJAREAAAAAAAABPAhGbJ6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+NAxAAcIAIVnhEQAHwQKhaJRz5/oeK0+OJ6GzHHHHH4fD4Vn+OOOP8fEjjjjj+Phuflnn5x+c5znOcYBw+OOHw3OPweHw44/h5xgPw+OPw+Gw+G5x+Hw3Oc5wHDwHDjjj+H4fDjjj+Hwc4wOHw+G5znOHw//+OPw+H4fOc5znOcf/hwHHHwOG5/44/D4fh+HzmAf/jjj+Cw+H4fw');

        let isMusicPlaying = false;
        let isSoundEnabled = true;
        
        // Helper Functions
        function showElement(elementId) {
            document.getElementById(elementId).style.display = 'block';
        }
        
        function hideElement(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }
        
        function hideAllGames() {
            hideElement('oddOneOut');
            hideElement('matchColumns');
            hideElement('countItems');
            hideElement('findMissing');
            hideElement('memoryGame');
        }
        
        function goToHome() {
            hideAllGames();
            showElement('gameSelection');
            currentGame = '';
            playSound(correctSound);
        }
        
        function selectGame(game) {
            hideElement('gameSelection');
            hideAllGames();
            showElement(game);
            currentGame = game;
            currentLevel = 1;
            updateLevelButtons();
            
            // Load first level of the selected game
            switch(game) {
                case 'oddOneOut':
                    loadOddOneOutLevel(1);
                    break;
                case 'matchColumns':
                    loadMatchColumnsLevel(1);
                    break;
                case 'countItems':
                    loadCountItemsLevel(1);
                    break;
                case 'findMissing':
                    loadFindMissingLevel(1);
                    break;
                case 'memoryGame':
                    loadMemoryLevel(1);
                    break;
            }
            
            playSound(correctSound);
            
            // Start background music if not already playing
            if (!isMusicPlaying) {
                toggleMusic();
            }
        }
        
        function updateLevelButtons() {
            // Update level buttons based on current level
            const levelBtns = document.querySelectorAll(`#${currentGame} .level-btn`);
            levelBtns.forEach((btn, index) => {
                btn.classList.remove('active');
                if (index + 1 === currentLevel) {
                    btn.classList.add('active');
                }
            });
            
            // Update navigation buttons
            const prevBtn = document.getElementById(`${currentGame}Prev`);
            const nextBtn = document.getElementById(`${currentGame}Next`);
            
            if (prevBtn && nextBtn) {
                prevBtn.disabled = currentLevel === 1;
                nextBtn.disabled = currentLevel === 3;
            }
        }
        
        function updateStars() {
            const stars = document.querySelectorAll(`#${currentGame} .star`);
            const score = scores[currentGame][currentLevel - 1];
            
            stars.forEach((star, index) => {
                if (index < score) {
                    star.classList.add('filled');
                } else {
                    star.classList.remove('filled');
                }
            });
        }
        
        function showFeedback(title, message, emoji, isCorrect) {
            const feedback = document.getElementById('feedback');
            document.getElementById('feedbackTitle').textContent = title;
            document.getElementById('feedbackMessage').textContent = message;
            document.getElementById('feedbackEmoji').textContent = emoji;
            feedback.classList.add('show');
            
            if (isCorrect) {
                playSound(correctSound);
            } else {
                playSound(wrongSound);
            }
            
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 2000);
        }
        
        function playSound(sound) {
            if (isSoundEnabled) {
                sound.currentTime = 0;
                sound.play();
            }
        }
        
        function toggleMusic() {
            const musicBtn = document.getElementById('toggleMusic');
            
            if (isMusicPlaying) {
                bgMusic.pause();
                musicBtn.textContent = '🔇';
                isMusicPlaying = false;
            } else {
                bgMusic.loop = true;
                bgMusic.play();
                musicBtn.textContent = '🎵';
                isMusicPlaying = true;
            }
        }
        
        function toggleSound() {
            const soundBtn = document.getElementById('toggleSound');
            
            if (isSoundEnabled) {
                soundBtn.textContent = '🔈';
                isSoundEnabled = false;
            } else {
                soundBtn.textContent = '🔊';
                isSoundEnabled = true;
                playSound(correctSound);
            }
        }
        
        // Odd One Out Game Functions
        function loadOddOneOutLevel(level) {
            currentLevel = level;
            updateLevelButtons();
            updateStars();
            
            const container = document.getElementById('oddOneOutItems');
            container.innerHTML = '';
            
            const levelData = gameData.oddOneOut.levels[level - 1];
            
            levelData.items.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'odd-item';
                div.innerHTML = `<span style="font-size: 2rem;">${item.img}</span>`;
                div.dataset.odd = item.isOdd;
                div.onclick = function() {
                    checkOddOneOut(this);
                };
                container.appendChild(div);
            });
        }
        
        function checkOddOneOut(clickedItem) {
            // If already answered, do nothing
            if (clickedItem.classList.contains('correct') || clickedItem.classList.contains('wrong')) {
                return;
            }
            
            const isOdd = clickedItem.dataset.odd === 'true';
            
            if (isOdd) {
                clickedItem.classList.add('correct');
                showFeedback('Great job!', 'You found the odd one out!', '🎉', true);
                scores[currentGame][currentLevel - 1] = 3; // Perfect score
                updateStars();
            } else {
                clickedItem.classList.add('wrong');
                showFeedback('Oops!', 'That\'s not the odd one. Try again!', '😕', false);
                scores[currentGame][currentLevel - 1] = Math.max(1, scores[currentGame][currentLevel - 1]); // At least 1 star for trying
                updateStars();
            }
        }
        
        function nextOddOneOutLevel() {
            if (currentLevel < 3) {
                loadOddOneOutLevel(currentLevel + 1);
            }
        }
        
        function prevOddOneOutLevel() {
            if (currentLevel > 1) {
                loadOddOneOutLevel(currentLevel - 1);
            }
        }
        
        // Match Columns Game Functions
        function loadMatchColumnsLevel(level) {
            currentLevel = level;
            updateLevelButtons();
            updateStars();
            
            const container = document.getElementById('matchColumnsContainer');
            container.innerHTML = '';
            
            const levelData = gameData.matchColumns.levels[level - 1];
            
            // Create left column
            const leftColumn = document.createElement('div');
            leftColumn.className = 'match-column';
            
            // Create right column
            const rightColumn = document.createElement('div');
            rightColumn.className = 'match-column';
            
            // Shuffle the right items for challenge
            const rightItems = [...levelData.pairs.map(pair => pair.right)];
            shuffleArray(rightItems);
            
            // Add items to columns
            levelData.pairs.forEach((pair, index) => {
                // Left item
                const leftItem = document.createElement('div');
                leftItem.className = 'match-item';
                leftItem.innerHTML = `<span style="font-size: 2rem;">${pair.left}</span>`;
                leftItem.dataset.index = index;
                leftItem.onclick = function() {
                    selectMatchItem(this, 'left');
                };
                leftColumn.appendChild(leftItem);
                
                // Right item
                const rightItem = document.createElement('div');
                rightItem.className = 'match-item';
                rightItem.innerHTML = `<span style="font-size: 2rem;">${rightItems[index]}</span>`;
                rightItem.dataset.value = rightItems[index];
                rightItem.onclick = function() {
                    selectMatchItem(this, 'right');
                };
                rightColumn.appendChild(rightItem);
            });
            
            container.appendChild(leftColumn);
            container.appendChild(rightColumn);
            
            // Reset selection variables
            selectedLeft = null;
            selectedRight = null;
        }
        
        // Variables to keep track of selected items
        let selectedLeft = null;
        let selectedRight = null;
        let matchedPairs = 0;
        
        function selectMatchItem(item, side) {
            // If already matched, do nothing
            if (item.classList.contains('matched')) {
                return;
            }
            
            if (side === 'left') {
                // Deselect previous left item if any
                if (selectedLeft) {
                    selectedLeft.classList.remove('selected');
                }
                
                // Select current item
                item.classList.add('selected');
                selectedLeft = item;
            } else {
                // Deselect previous right item if any
                if (selectedRight) {
                    selectedRight.classList.remove('selected');
                }
                
                // Select current item
                item.classList.add('selected');
                selectedRight = item;
            }
            
            // Check if both sides are selected
            if (selectedLeft && selectedRight) {
                checkMatch();
            }
        }
        
        function checkMatch() {
            const leftIndex = selectedLeft.dataset.index;
            const rightValue = selectedRight.dataset.value;
            const levelData = gameData.matchColumns.levels[currentLevel - 1];
            
            if (rightValue === levelData.pairs[leftIndex].right) {
                // Correct match
                selectedLeft.classList.add('matched');
                selectedRight.classList.add('matched');
                selectedLeft.classList.remove('selected');
                selectedRight.classList.remove('selected');
                
                // Draw line connecting the matches
                drawMatchLine(selectedLeft, selectedRight);
                
                // Play sound
                playSound(correctSound);
                
                matchedPairs++;
                
                // Check if all pairs are matched
                if (matchedPairs === levelData.pairs.length) {
                    showFeedback('Great job!', 'You matched all pairs correctly!', '🎉', true);
                    scores[currentGame][currentLevel - 1] = 3; // Perfect score
                    updateStars();
                    matchedPairs = 0; // Reset for next level
                }
                
                // Reset selection
                selectedLeft = null;
                selectedRight = null;
            } else {
                // Wrong match
                setTimeout(() => {
                    selectedLeft.classList.remove('selected');
                    selectedRight.classList.remove('selected');
                    selectedLeft = null;
                    selectedRight = null;
                }, 500);
                
                playSound(wrongSound);
                
                // Reduce score but ensure at least 1 star
                scores[currentGame][currentLevel - 1] = Math.max(1, scores[currentGame][currentLevel - 1] - 1);
                updateStars();
            }
        }
        
        function drawMatchLine(leftItem, rightItem) {
            const leftRect = leftItem.getBoundingClientRect();
            const rightRect = rightItem.getBoundingClientRect();
            
            const containerRect = document.getElementById('matchColumnsContainer').getBoundingClientRect();
            
            const x1 = leftRect.right - containerRect.left;
            const y1 = leftRect.top + leftRect.height / 2 - containerRect.top;
            const x2 = rightRect.left - containerRect.left;
            const y2 = rightRect.top + rightRect.height / 2 - containerRect.top;
            
            const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
            
            const line = document.createElement('div');
            line.className = 'match-line';
            line.style.width = `${length}px`;
            line.style.left = `${x1}px`;
            line.style.top = `${y1}px`;
            line.style.transform = `rotate(${angle}deg)`;
            
            document.getElementById('matchColumnsContainer').appendChild(line);
        }
        
        function nextMatchColumnsLevel() {
            if (currentLevel < 3) {
                matchedPairs = 0;
                loadMatchColumnsLevel(currentLevel + 1);
            }
        }
        
        function prevMatchColumnsLevel() {
            if (currentLevel > 1) {
                matchedPairs = 0;
                loadMatchColumnsLevel(currentLevel - 1);
            }
        }
        
        // Count Items Game Functions
        function loadCountItemsLevel(level) {
            currentLevel = level;
            updateLevelButtons();
            updateStars();
            
            const container = document.getElementById('countItemsDisplay');
            container.innerHTML = '';
            
            const levelData = gameData.countItems.levels[level - 1];
            
            // Reset the input
            document.getElementById('countAnswer').value = '';
            
            // Add all items to the display
            levelData.items.forEach(item => {
                for (let i = 0; i < item.count; i++) {
                    const div = document.createElement('div');
                    div.className = 'count-item';
                    div.innerHTML = `<span style="font-size: 2rem;">${item.img}</span>`;
                    container.appendChild(div);
                }
            });
            
            // Shuffle the items for challenge
            const items = container.querySelectorAll('.count-item');
            const itemsArray = Array.from(items);
            shuffleArray(itemsArray);
            
            // Re-append items in random order
            container.innerHTML = '';
            itemsArray.forEach(item => {
                container.appendChild(item);
            });
        }
        
        function checkCountAnswer() {
            const userAnswer = parseInt(document.getElementById('countAnswer').value);
            const levelData = gameData.countItems.levels[currentLevel - 1];
            
            // Calculate total items
            const correctAnswer = levelData.items.reduce((total, item) => total + item.count, 0);
            
            if (userAnswer === correctAnswer) {
                showFeedback('Great job!', `Yes, there are ${correctAnswer} items!`, '🎉', true);
                scores[currentGame][currentLevel - 1] = 3; // Perfect score
                updateStars();
            } else {
                showFeedback('Oops!', `That's not correct. Try counting again!`, '😕', false);
                scores[currentGame][currentLevel - 1] = Math.max(1, scores[currentGame][currentLevel - 1] - 1);
                updateStars();
            }
        }
        
        function nextCountItemsLevel() {
            if (currentLevel < 3) {
                loadCountItemsLevel(currentLevel + 1);
            }
        }
        
        function prevCountItemsLevel() {
            if (currentLevel > 1) {
                loadCountItemsLevel(currentLevel - 1);
            }
        }
        
        // Find Missing Game Functions
        function loadFindMissingLevel(level) {
            currentLevel = level;
            updateLevelButtons();
            updateStars();
            
            const patternDisplay = document.getElementById('patternDisplay');
            const optionsDisplay = document.getElementById('optionsDisplay');
            
            patternDisplay.innerHTML = '';
            optionsDisplay.innerHTML = '';
            
            const levelData = gameData.findMissing.levels[level - 1];
            
            // Add pattern items
            levelData.pattern.forEach(item => {
                const div = document.createElement('div');
                div.className = 'pattern-item';
                if (item === '❓') {
                    div.classList.add('missing');
                    div.innerHTML = `<span style="font-size: 2rem;">${item}</span>`;
                } else {
                    div.innerHTML = `<span style="font-size: 2rem;">${item}</span>`;
                }
                patternDisplay.appendChild(div);
            });
            
            // Add options
            levelData.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option-item';
                div.innerHTML = `<span style="font-size: 2rem;">${option}</span>`;
                div.dataset.index = index;
                div.onclick = function() {
                    selectPatternOption(this);
                };
                optionsDisplay.appendChild(div);
            });
            
            // Reset selected option
            selectedOption = null;
        }
        
        let selectedOption = null;
        
        function selectPatternOption(option) {
            // If already selected or game completed, do nothing
            if (option.classList.contains('correct') || option.classList.contains('wrong')) {
                return;
            }
            
            // Deselect previous option if any
            if (selectedOption) {
                selectedOption.classList.remove('selected');
            }
            
            // Select current option
            option.classList.add('selected');
            selectedOption = option;
            
            // Check if correct
            const optionIndex = parseInt(option.dataset.index);
            const levelData = gameData.findMissing.levels[currentLevel - 1];
            
            if (optionIndex === levelData.correctAnswer) {
                option.classList.add('correct');
                option.classList.remove('selected');
                
                // Replace the missing item with the correct one
                const missingItem = document.querySelector('.pattern-item.missing');
                missingItem.innerHTML = `<span style="font-size: 2rem;">${levelData.options[optionIndex]}</span>`;
                missingItem.classList.add('correct');
                
                showFeedback('Great job!', 'You found the missing piece of the pattern!', '🎉', true);
                scores[currentGame][currentLevel - 1] = 3; // Perfect score
                updateStars();
            } else {
                option.classList.add('wrong');
                option.classList.remove('selected');
                
                setTimeout(() => {
                    option.classList.remove('wrong');
                }, 1000);
                
                showFeedback('Oops!', 'That\'s not the right piece. Try again!', '😕', false);
                scores[currentGame][currentLevel - 1] = Math.max(1, scores[currentGame][currentLevel - 1] - 1);
                updateStars();
            }
            
            selectedOption = null;
        }
        
        function nextFindMissingLevel() {
            if (currentLevel < 3) {
                loadFindMissingLevel(currentLevel + 1);
            }
        }
        
        function prevFindMissingLevel() {
            if (currentLevel > 1) {
                loadFindMissingLevel(currentLevel - 1);
            }
        }
        
        // Memory Game Functions
        function loadMemoryLevel(level) {
            currentLevel = level;
            updateLevelButtons();
            updateStars();
            
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            
            const levelData = gameData.memoryGame.levels[level - 1];
            
            // Create pairs
            let cards = [];
            levelData.pairs.forEach(pair => {
                cards.push({ value: pair, isFlipped: false, isMatched: false });
                cards.push({ value: pair, isFlipped: false, isMatched: false });
            });
            
            // Shuffle cards
            shuffleArray(cards);
            
            // Set grid columns based on level
            const gridSize = Math.sqrt(cards.length);
            grid.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
            
            // Add cards to grid
            cards.forEach((card, index) => {
                const div = document.createElement('div');
                div.className = 'memory-card';
                div.dataset.index = index;
                div.dataset.value = card.value;
                
                const front = document.createElement('div');
                front.className = 'memory-card-front';
                front.innerHTML = `<span style="font-size: 2rem;">${card.value}</span>`;
                
                const back = document.createElement('div');
                back.className = 'memory-card-back';
                back.textContent = '?';
                
                div.appendChild(front);
                div.appendChild(back);
                
                div.onclick = function() {
                    flipMemoryCard(this);
                };
                
                grid.appendChild(div);
            });
            
            // Reset game state
            flippedCards = [];
            matchedPairs = 0;
            isProcessing = false;
        }
        
        let flippedCards = [];
        let isProcessing = false;
        
        function flipMemoryCard(card) {
            // If card is already flipped or matched, or we're processing a pair, do nothing
            if (card.classList.contains('flipped') || card.classList.contains('matched') || isProcessing) {
                return;
            }
            
            // If we already have 2 flipped cards, do nothing
            if (flippedCards.length >= 2) {
                return;
            }
            
            // Flip the card
            card.classList.add('flipped');
            playSound(correctSound);
            
            // Add to flipped cards
            flippedCards.push(card);
            
            // If we have 2 flipped cards, check for a match
            if (flippedCards.length === 2) {
                isProcessing = true;
                
                setTimeout(() => {
                    checkMemoryMatch();
                    isProcessing = false;
                }, 1000);
            }
        }
        
        function checkMemoryMatch() {
            const card1 = flippedCards[0];
            const card2 = flippedCards[1];
            
            if (card1.dataset.value === card2.dataset.value) {
                // Match
                card1.classList.add('matched');
                card2.classList.add('matched');
                
                matchedPairs++;
                
                // Check if all pairs are matched
                const levelData = gameData.memoryGame.levels[currentLevel - 1];
                if (matchedPairs === levelData.pairs.length) {
                    showFeedback('Great job!', 'You matched all pairs correctly!', '🎉', true);
                    scores[currentGame][currentLevel - 1] = 3; // Perfect score
                    updateStars();
                }
            } else {
                // No match
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                
                // Reduce score but ensure at least 1 star
                scores[currentGame][currentLevel - 1] = Math.max(1, scores[currentGame][currentLevel - 1]);
                updateStars();
            }
            
            // Reset flipped cards
            flippedCards = [];
        }
        
        function nextMemoryLevel() {
            if (currentLevel < 3) {
                loadMemoryLevel(currentLevel + 1);
            }
        }
        
        function prevMemoryLevel() {
            if (currentLevel > 1) {
                loadMemoryLevel(currentLevel - 1);
            }
        }
        
        // Utility Functions
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Initialize the game
        window.onload = function() {
            hideAllGames();
            showElement('gameSelection');
        };
        </script>
        </body>
        </html>